# 星光小栈 V2.0.1 更新日志

本次更新主要优化性能和修复已知问题。

## 🐛 Bug修复

### 后端修复

1. **文章查询优化**
   - 修复分页查询时N+1问题
   - 优化分类关联查询
   - 添加查询结果缓存

2. **评论系统**
   - 修复楼中楼评论显示错误
   - 修复评论通知不及时的问题
   - 优化评论树形结构构建

3. **统计功能**
   - 修复访问统计去重逻辑
   - 修复统计数据计算错误
   - 优化统计SQL性能

4. **其他修复**
   - 修复文件上传大小限制问题
   - 修复登录Token刷新机制
   - 修复跨域配置不生效

### 前端修复

1. **UI问题**
   - 修复移动端菜单显示异常
   - 修复代码块滚动条样式
   - 修复暗色模式下的显示问题

2. **功能修复**
   - 修复文章搜索高亮失效
   - 修复评论提交按钮禁用逻辑
   - 修复图片懒加载不生效

3. **性能优化**
   - 优化首屏加载速度
   - 优化图片加载策略
   - 减少不必要的API请求

## ⚡ 性能优化

### 数据库优化

- 添加缺失的索引
- 优化慢查询SQL
- 启用查询缓存

### 缓存优化

- 调整缓存过期策略
- 实现缓存预热
- 优化缓存key设计

### 前端优化

- 启用Gzip压缩
- 优化打包体积（减少30%）
- 实现路由懒加载

## 🔧 改进

### 用户体验

- 优化加载动画效果
- 改进错误提示信息
- 优化移动端适配

### 开发体验

- 添加更多的单元测试
- 完善API文档
- 优化日志输出

## 📊 性能数据

**对比V2.0.0：**

| 指标 | V2.0.0 | V2.0.1 | 提升 |
|------|--------|--------|------|
| 首页加载时间 | 1.2s | 0.8s | 33% |
| 文章详情加载 | 600ms | 400ms | 33% |
| 打包体积 | 2.5MB | 1.7MB | 32% |
| 数据库查询 | 150ms | 80ms | 47% |

## 🔒 安全更新

- 升级依赖库版本
- 修复潜在的XSS漏洞
- 加强输入验证

## 📝 文档更新

- 完善部署文档
- 添加开发指南
- 更新API文档

## ⬆️ 依赖升级

**后端：**
- Spring Boot: 3.2.5 → 3.2.6
- MySQL Connector: 8.0.33 → 8.0.34

**前端：**
- Vue: 3.4.21 → 3.4.27
- Vite: 5.2.8 → 5.2.11

## 🙏 致谢

感谢以下用户提供的反馈：

- @user1: 反馈移动端显示问题
- @user2: 提供性能优化建议
- @user3: 发现评论系统bug

## 📅 下一步计划

V2.0.2计划（1周内）：
- 实现主题切换功能
- 添加RSS订阅
- 继续性能优化

---

**发布日期：** 2025-11-08

**升级方式：**
```bash
git pull origin main
mvn clean package
```

**问题反馈：** admin@blog.com
